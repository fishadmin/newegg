<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>新蛋商品活动页面</title>
		<link rel="stylesheet" type="text/css" href="css/public.css"/>
		<link rel="stylesheet" type="text/css" href="css/activitygoods.css"/>
	</head>
	<body>
		<div id="top">
			<div class="margin">
			<div class="top-l">
				<a href="#">掌上新蛋</a>
				<a href="#">企业团购</a>
			</div>
			<div class="top-r">
				<span class="welcome">
				<a href="http://127.0.0.1:8020/htdocs/newegg/register.html" target="_blank">注册</a><b>|</b><a href="login.html" class="xxx" target="_blank">登录</a><a href="#" class="wel-night">欢迎来新蛋购物！</a></span>
				</span>
				
				<ul>
				<li><a href="#" >我的订单</a></li>
				<li class="xiala"><i class="oper">我的新蛋<s></s></i>
				<div class="inner toptip">请 <a href="http://127.0.0.1:8020/htdocs/newegg/login.html" target="_blank" class="login">登录</a> 后查看</div></li>
				<li><a href="#">帮助中心</a></li>
				<li class="service xiala">
				<i class="oper">客户服务<s></s></i>
				<div class="inner toptip1">
				    <div class="info">
				        <p class="orange"><strong>400-820-4400</strong></p>
				        <strong>021-67072699</strong>
				        <p>每天 9:00 - 18:00</p>
				    </div>
				   <div class="lianxi">
				   		<a href="#"><span>在线咨询</span></a>
				   		<a href="#"><span>邮件我们</span></a>
				   </div>
				</div>
				</a>
				</ul>
			</div>
			</div>
		</div>
		
		<header class="margin">
			<a href="index.html" class="logo"><img src="img/logo.png"/></a>
			<div class="logo-sear">
				<div class="sear">
					<input type="text" class="sear-l" placeholder="请输入您要搜索的关键字"/><a class="sear-r" href="#">搜索</a>
				</div>
				<p><a href="#">Bose</a><b>|</b><a href="#">iPhoneX</a><b>|</b><a href="#">mate10</a><b>|</b><a href="#">Thinkpad</a><b>|</b><a href="#">索尼电视机</a></p>
			</div>
		</header>
		
		<div id="nav">
		<div class="margin">
			<div class="menu">
				<h3>全部商品分类 <s></s> </h3>
				
			</div>
			<ul class="shouye">
				<li><a href="#">首页</a></li>
				<li><a href="#">限时抢购</a></li>
				<li><a href="#">团团赚</a></li>
				<li><a href="#">海外直购</a></li>
				<li><a href="#">爱车配</a></li>
				<li><a href="#">二手宝库</a></li>
			</ul>
			<!--<span></span><b>|</b><span></span>-->
		</div>
		</div>
		
		
		
		<div id="body">
			<div class="box">
				<div class="ban margin">
				<div class="banner"><img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201805/520dacu0511/banner1.jpg"/></div>
				<div class="banner"><img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201805/520dacu0511/banner2.jpg"/></div>
			</div>
			
			<div class="code"> 
				<span><img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201709/jiaoshijie0904/wx.png"></span>
	            <p>新蛋微信公众号</p>
	            <span><img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201709/jiaoshijie0904/khd.png"></span>
	            <p>新蛋客户端下载</p>
	            <p style="position:relative;top:-24px;"><a href="#main" style="color: #ff2271;">商品表</a> &nbsp; <a href="#top" style="color: #ff2271;">回到顶部</a></p>
            </div>
			
			<div class="pro">
				<img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201805/520dacu0511/title01.jpg" border="0">
				<img class="img" src="img/juan1.jpg"/>
				<img class="img" src="img/juan2.jpg"/>
				<img class="img" src="img/juan3.jpg"/>
			</div>
			<div class="pro">
				<img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201805/520dacu0511/title03.jpg" border="0">
			</div>
			<div class="pro">
				<img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201805/520dacu0511/baokuan1.jpg" border="0" usemap="#Map">
            <map name="Map" id="Map">
            <area shape="rect" coords="27,6,486,484" href="#">
            <area shape="rect" coords="498,4,948,483" href="#">
            </map>
 			</div>
 			<div class="pro"><img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201805/520dacu0511/baokuan2.jpg" border="0" usemap="#Map2">
            <map name="Map2" id="Map2">
             <area shape="rect" coords="38,8,480,482" href="#" >
             <area shape="rect" coords="500,7,944,484" href="#">
            </map>
			</div>
			<div class="pro"><img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201805/520dacu0511/baokuan3.jpg" border="0" usemap="#Map3">
            <map name="Map3" id="Map3">
             <area shape="rect" coords="36,9,483,479" href="#">
             <area shape="rect" coords="502,6,946,478" href="#">
            </map>
			</div>
			
			
			
			
		<div id="main">
			<div id="floor1" class="pro">
				<img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201805/520dacu0511/title1.jpg">
				<img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201805/520dacu0511/title8.jpg" >
			</div>
			<div class="sp margin">
				<a href="spcar.html" style="color: #f60;font-size: 16px;line-height: 20px;font-weight: 700;" target="_blank">去购物车结算（查看商品详情---点击商品图哦---）</a>
				<div class="goods">
					<div class="box">
						
					</div>
					
				</div>
				<a href="spcar.html" style="color: #f60;font-size: 16px;line-height: 20px;font-weight: 700;" target="_blank">去购物车结算（查看商品详情---点击商品图哦---）</a>
			</div>
		</div>
		</div>
		
		
		
		
		
		
		<div style="padding-bottom: 10px;height: 366px;background-color: #FFFFFF">
            <div class="adv1">
                <h4>
                	   您可能喜欢的活动
                    <span style="border-left-width: 8px; padding-left: 10px; letter-spacing: -3px; color: Gray">
                        --------------------------------------------------------------------------------------------------------------------------------------</span>
                </h4>
                <div class="adv1_c">
                    <div class="adv1_cnt">
                    <div class="picBanner"  align="center">
					<a href="#">
						<img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201804/shenghuojiadian0423/banresize/238x268.jpg" class="" width="239" height="208" alt="生活家电">
					</a>
					</div>
                </div>
                <div class="adv1_cnt">
                    <div class="picBanner"  align="center">
					<a href="#">
						<img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201804/FT/238x268.jpg" class="" width="239" height="208" alt="方太专场">
					</a>
					</div>
                 </div>
                 <div class="adv1_cnt">
                 <div class="picBanner"  align="center">
				<a href="#">
					<img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201805/huawei180425/238x268.jpg" class="" width="239" height="208" alt="华为专场">
				</a>
				</div>
           </div>
           <div class="adv1_cnt mrn">
                <div  class="picBanner" align="center">
				<a href="#">
					<img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201804/yjht/238x268.jpg" class="" width="239" height="208" alt="墨镜">
				</a>
			</div>
            </div>
                    
        </div>
        </div>
            
        <div class="adv3">
            <div  align="center">
			<a href="#">
				<img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201804/resize490/490x100.jpg" class="" width="490" height="100" alt="海淘周周惠">
			</a>
			</div>
			<div align="center">
			<a href="#">
				<img src="http://c1.neweggimages.com.cn/NeweggPic2/Marketing/201804/resize490/490x100-1.jpg" width="490" height="100""></a>
			</div>
           </div>
         
         
            <div class="clear">
            </div>
        </div>
		
		
		
		
		<div id="footer">   
		<div class="margin">
		<div class="helpcenter">
		<dl class="help-fresh">
		<dt>新手上路</dt>
		<dd>
		<ul>
		    <li><a href="#" >·怎样购物</a></li>
		    <li><a href="#" >·支付常见问题</a></li>
		    <li><a href="#">·免运费政策</a></li>
		    <li><a href="#" >·发票须知</a></li>
		    <li><a href="#" >·签收验货流程</a></li>
		    <li><a href="#" >·用户评论/咨询</a></li>
		    <li><a href="#" >·大件商品订购流程</a></li>
		</ul>
		</dd>	    
		</dl>
		
		
		<dl class="help-service"><dt>售后服务</dt>
		<dd>
		<ul>
		    <li><a href="#" >·退换货政策</a></li>
		    <li><a href="#" >·订单查询</a></li>
		    <li><a href="#" >·售后申请</a></li>
		</ul>
		</dd>
		</dl>
		
		<dl class="SpecialServies"><dt>特色服务</dt>
		<dd>
		<ul>
		    <li><a href="#" >·关于会员制</a></li>
		    <li><a href="#" >·价格保护</a></li>
		</ul>
		</dd>
		</dl>
		
		
		<dl class="help-cooperate"><dt>申请合作</dt>
		<dd>
		<ul>
			<li><a href="#">·申请成为供应商</a></li>
			<li><a href="#" >·申请入驻开放平台</a></li>
		    <li><a href="#" >·友情合作</a></li>
		    <li><a href="#" >·网站联盟</a></li>
		    <li><a href="#" >·企业客户</a></li>
		</ul>
		</dd>
		</dl>
		
		<dl class="help-about"><dt>关于我们</dt>
		<dd>
		<ul>
			<li><a href="#" >·新蛋集团 </a></li>   
		    <li><a href="#" >·联系我们</a></li>
		    <li><a href="#" >·诚聘英才</a></li>
		</ul>
		</dd>
		</dl>
		</div>
		</div>
		
		
		
		
		
		<div id="footer-img">
		<a href="#" class="item1"></a>
		<a href="#" class="item2"></a>
		<a href="#" class="item3"></a>
		<a href="#" class="item4"></a>
		<a href="#" class="item5"></a>
		
		 <p>新蛋集团网站：<a href="#" >美国新蛋</a><a href="#" >中国新蛋</a><a href="#" >加拿大新蛋</a><a href="#" >新蛋软件</a></p>
		 <p><span>© 2001-2018</span> <span>新蛋商贸（上海）有限公司</span> <span>版权所有</span> <span><a href="#" >沪ICP备:16033615</a></span></p>
		</div>
		</div>
		</div>

	</body>
	
	<script src="js/jquery.js"></script>
	<script src="js/jquery.cookie.js"></script>
	<script type="text/javascript">
		
		if($.cookie("user")){
		var username=$.cookie("user")
		$(".xxx").html(username);
		$(".toptip").html("你好<br/>"+username);
   		}
		
		class ShopCar{
			constructor(){
				this.cont = $(".goods");
				this.load()
			}
			load(){
				var that = this;
				$.ajax({
					type:"get",
					url:"/activitygoods",
					success:function(res){
						that.res = res;
						that.display();
						that.init();
					}
				});
			}
			display(){
				var str = "";
				this.res.forEach(function(value){
					str += `<div class="box" data-id="${value.goodsId}">
								<img class="infoimg" src="${value.src}">
								<p class="pri">新蛋价：<strong>${value.price}</strong></p>
								<p class="info">${value.info}</p>
								<em>加入购物车</em>
							</div>`;
				})
				this.cont.html(str);
			}
			init(){
				var that = this;
				this.cont.on("click","em",function(){
					var index = $(this).parent().attr("data-id");
					that.setcookie(index)
				})
				
				this.cont.on("click",".infoimg",function(){
					
					$.cookie("infoid",$(this).parent().attr("data-id"));
					location.href="spinfo.html";
					
				})
				
			
			}
			
			setcookie(id){
		//		之前有:先获取,然后在原有基础上新增
		//		之前没有:直接存储
				if(!$.cookie("goods")){
		//			之前没有
					this.goods = [{"id":id,"num":1}];
				}else{
		//			之前有
					var str = $.cookie("goods");
					this.goods = JSON.parse(str);
					var onoff = true;
					for(var i=0;i<this.goods.length;i++){
						if(this.goods[i].id == id){
							this.goods[i].num++;
							onoff = false;
						}
					}
					if(onoff){
						this.goods.push({"id":id,"num":1});
					}
				}
				$.cookie("goods",JSON.stringify(this.goods))
			}
		}
		new ShopCar();
		
		
	</script>
</html>
