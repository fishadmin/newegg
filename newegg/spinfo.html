<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>新蛋商品详情</title>
		<link rel="stylesheet" type="text/css" href="css/public.css"/>
		<link rel="stylesheet" type="text/css" href="css/spinfo.css"/>
	</head>
	<body>
		
		
		
		
		<!--进入商品活动页面activitygoods.html点击商品图片(点banner图进入商品活动页面activitygoods.html)-->
		
		<br />
		
		
		
		<div id="top">
			<div class="margin">
			<div class="top-l">
				<a href="#">掌上新蛋</a>
				<a href="#">企业团购</a>
			</div>
			<div class="top-r">
				<span class="welcome">
				<a href="register.html" target="_blank">注册</a><b>|</b><a class="xxx" href="login.html" target="_blank">登录</a><a href="#" class="wel-night">欢迎来新蛋购物！</a></span>
				</span>
				
				<ul>
				<li><a href="#" >我的订单</a></li>
				<li class="xiala"><i class="oper">我的新蛋<s></s></i>
				<div class="inner toptip">请 <a href="http://127.0.0.1:8020/htdocs/newegg/login.html" target="_blank" class="login">登录</a> 后查看</div></li>
				<li><a href="#">帮助中心</a></li>
				<li class="service xiala">
				<i class="oper">客户服务<s></s></i>
				<div class="inner toptip1">
				    <div class="info">
				        <p class="orange"><strong>400-820-4400</strong></p>
				        <strong>021-67072699</strong>
				        <p>每天 9:00 - 18:00</p>
				    </div>
				   <div class="lianxi">
				   		<a href="#"><span>在线咨询</span></a>
				   		<a href="#"><span>邮件我们</span></a>
				   </div>
				</div>
				</a>
				</ul>
			</div>
			</div>
		</div>
		
		<header class="margin">
			<a href="index.html" class="logo"><img src="img/logo.png"/></a>
			<div class="logo-sear">
				<div class="sear">
					<input type="text" class="sear-l" placeholder="请输入您要搜索的关键字"/><a class="sear-r" href="#">搜索</a>
				</div>
				<p><a href="#">Bose</a><b>|</b><a href="#">iPhoneX</a><b>|</b><a href="#">mate10</a><b>|</b><a href="#">Thinkpad</a><b>|</b><a href="#">索尼电视机</a></p>
			</div>
		</header>
		
		
		<div id="main" class="margin">
			<div class="inso">
			
		</div>
		</div>

		<div id="footer">    
		<div class="helpcenter">
		<dl class="help-fresh">
		<dt>新手上路</dt>
		<dd>
		<ul>
		    <li><a href="#" >·怎样购物</a></li>
		    <li><a href="#" >·支付常见问题</a></li>
		    <li><a href="#">·免运费政策</a></li>
		    <li><a href="#" >·发票须知</a></li>
		    <li><a href="#" >·签收验货流程</a></li>
		    <li><a href="#" >·用户评论/咨询</a></li>
		    <li><a href="#" >·大件商品订购流程</a></li>
		</ul>
		</dd>	    
		</dl>
		
		
		<dl class="help-service"><dt>售后服务</dt>
		<dd>
		<ul>
		    <li><a href="#" >·退换货政策</a></li>
		    <li><a href="#" >·订单查询</a></li>
		    <li><a href="#" >·售后申请</a></li>
		</ul>
		</dd>
		</dl>
		
		<dl class="SpecialServies"><dt>特色服务</dt>
		<dd>
		<ul>
		    <li><a href="#" >·关于会员制</a></li>
		    <li><a href="#" >·价格保护</a></li>
		</ul>
		</dd>
		</dl>
		
		
		<dl class="help-cooperate"><dt>申请合作</dt>
		<dd>
		<ul>
			<li><<a href="#">·申请成为供应商</a></li>
			<li><a href="#" >·申请入驻开放平台</a></li>
		    <li><a href="#" >·友情合作</a></li>
		    <li><a href="#" >·网站联盟</a></li>
		    <li><a href="#" >·企业客户</a></li>
		</ul>
		</dd>
		</dl>
		
		<dl class="help-about"><dt>关于我们</dt>
		<dd>
		<ul>
			<li><a href="#" >·新蛋集团 </a></li>   
		    <li><a href="#" >·联系我们</a></li>
		    <li><a href="#" >·诚聘英才</a></li>
		</ul>
		</dd>
		</dl>
		</div>
		</div>
		
		
		
		
		
		<div id="footer-img">
		<a href="#" class="item1"></a>
		<a href="#" class="item2"></a>
		<a href="#" class="item3"></a>
		<a href="#" class="item4"></a>
		<a href="#" class="item5"></a>
		
		 <p>新蛋集团网站：<a href="#" >美国新蛋</a><a href="#" >中国新蛋</a><a href="#" >加拿大新蛋</a><a href="#" >新蛋软件</a></p>
		 <p><span>© 2001-2018</span> <span>新蛋商贸（上海）有限公司</span> <span>版权所有</span> <span><a href="#" >沪ICP备:16033615</a></span></p>
		</div>
		</div>
	</body>
	
	<script src="js/jquery.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/jquery.cookie.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		
		if($.cookie("user")){
		var username=$.cookie("user")
		$(".xxx").html(username);
		$(".toptip").html("你好<br/>"+username);
   		}
		
		
		class ShopInfo{
			constructor(){
				this.cont = $("#main");
				this.load()
			}
			load(){
				var that = this;
				$.ajax({
					type:"get",
					url:"data/goods.json",
					dataType:"json",
					success:function(res){
						that.res = res;
						that.display();
						that.init();
					}
				});
			}
			display(){
				var str = "";
				this.info = $.cookie("infoid");
				
				for(var i=0;i<this.res.length;i++){
						if(this.res[i].goodsId == this.info){
				str +=`<div class="inso" data-id="${this.res[i].goodsId}">
				<div class="goods-l">
			<div class="goods-img">
				<img class="te" src="${this.res[i].src}">
				<img src="http://c3.neweggimages.com.cn/neweggpic2/neg/P640/A31-6PJ-6JK_02.jpg">
				<img src="http://c4.neweggimages.com.cn/neweggpic2/neg/P640/A31-6PJ-6JK_03.jpg">
			</div>
			
			<p class="xtu">
				<img src="${this.res[i].src}">
				<img src="http://c3.neweggimages.com.cn/neweggpic2/neg/P80/A31-6PJ-6JK_02.jpg">
				<img src="http://c4.neweggimages.com.cn/neweggpic2/neg/P80/A31-6PJ-6JK_03.jpg">
			</p>
			</div>
				
			<div class="goods-r">
				<div class="box">
				<p class="info">${this.res[i].info}</p>
				<p class="pp"><s>品牌：</s><span>${this.res[i].pp}</span></p>
				<p class="xh"><s>产品型号：</s><span>${this.res[i].xh}</span></p>
				<p class="pri">新蛋价：<strong>${this.res[i].price}</strong></p>
				<p class="zhichi">商品支持：<span>不支持无理由退</span></p>
				<p>数量:<input type="number" min="1" value="1"></p>
				<em>加入购物车</em>
				<a style="position:relative;left:222px;top:-28px;color:#f60;font-size:16px;" href="activitygoods.html#main">返回商品活动列表～</a>
				</div>
				
			</div>`
				
						}
					}
				this.cont.html(str);
			
			
			$("#main>.inso>.goods-l>.xtu>img").mouseenter(function(){
//			console.log($(this).index())
			$(this).css({border:"2px solid #f60",padding:"8px"})
			$(this).siblings().css({border:0})
			$("#main>.inso>.goods-l>.goods-img>img").eq($(this).index()).fadeIn(10)
			$("#main>.inso>.goods-l>.goods-img>img").eq($(this).index()).siblings().fadeOut(10)
			
		})
				}

			init(){
				var that = this;
				this.cont.on("click","em",function(){
					var index = $(this).parent().attr("data-id");
					that.setcookie(index)
				})
			}
			setcookie(id){
		//		之前有:先获取,然后在原有基础上新增
		//		之前没有:直接存储
				if(!$.cookie("goods")){
		//			之前没有
					this.goods = [{"id":id,"num":1}];
				}else{
		//			之前有
					var str = $.cookie("goods");
					this.goods = JSON.parse(str);
					var onoff = true;
					for(var i=0;i<this.goods.length;i++){
						if(this.goods[i].id == id){
							this.goods[i].num++;
							onoff = false;
						}
					}
					if(onoff){
						this.goods.push({"id":id,"num":1});
					}
				}
				$.cookie("goods",JSON.stringify(this.goods))
			}
		}
		new ShopInfo();
	</script>
</html>
